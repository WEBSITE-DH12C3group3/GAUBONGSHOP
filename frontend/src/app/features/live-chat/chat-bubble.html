<!-- Nút tròn nổi (badge realtime) -->
<button
  (click)="toggle()"
  class="fixed bottom-6 right-6 z-[9998] rounded-full w-14 h-14 bg-rose-600 text-white shadow-2xl grid place-items-center hover:scale-105 transition-transform">
  <span class="relative">
    <svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.8"
            d="M7 8h10M7 12h6m-9 7l3-3h8a4 4 0 004-4V7a4 4 0 00-4-4H7a4 4 0 00-4 4v10z"/>
    </svg>
    <span *ngIf="unread>0"
          class="absolute -top-2 -right-2 w-5 h-5 rounded-full bg-white text-rose-600 text-[11px] grid place-items-center font-bold shadow animate-pulse">
      {{ unread }}
    </span>
  </span>
</button>

<!-- Widget kéo thả -->
<app-chat-widget *ngIf="open" [sessionId]="sessionId"
  (opened)="onWidgetOpened()" (closed)="toggle()"
  class="fixed bottom-24 right-6 z-[9999]"></app-chat-widget>
